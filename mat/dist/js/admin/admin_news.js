var admin_news={_init:function(){var a=admin_news;a._listen(),a._listen_cat()},_listen:function(){var a=admin_news;$("#J_pic").change(function(){return $("#J_form_do").val("upload"),a.bool_sending?!1:(a.bool_sending=!0,_ajax_frame(get_obj("ajaxframeid"),a.upload_success,"send_success"),void $("#J_send_form").submit())}),$("#J_send_form").submit(function(){if("upload"==$("#J_form_do").val())return!0;var b=$("#J_language");if(b.length>0&&b.val()<=0)return make_alert_html(arr_language.warn,arr_language.error_2),!1;var c=$("#J_cid");if("none"!=c.css("display")){var d=$("#J_cid");if(d.val()<=0)return make_alert_html(arr_language.warn,arr_language.news.error_2),!1;var e=$("#J_cid_2");if("none"!=e.css("display")&&e.val()<=0)return make_alert_html(arr_language.warn,arr_language.news.error_2),!1;var b=$("#J_cid_3");if("none"!=b.css("display")&&b.val()<=0)return make_alert_html(arr_language.warn,arr_language.news.error_2),!1}var f=$("#J_title");return f.val()?ue.getContent()?a.bool_sending?!1:($("#J_form_do").val("add"),a.bool_sending=!0,void _ajax_frame(get_obj("ajaxframeid"),a.send_success,"send_success")):(make_alert_html(arr_language.warn,arr_language.news.error_1),!1):(make_alert_html(arr_language.warn,arr_language.news.error_3),!1)})},upload_success:function(a){var b=admin_news;return _remove_ajax_frame("upload_success"),$("#J_form_do").val(""),200!=a.status?(b.bool_sending=!1,make_alert_html(arr_language.warn,a.info),!1):(b.bool_sending=!1,$("#J_pic_show").html('<img src="'+a.data+'" style="width:100px">'),void $("#J_pic_url").val(a.data))},_listen_cat:function(){var a=admin_news,b=$("#J_cid");if(b.change(function(){var b=$(this),c=b.val();$("#J_cid_2").css("display","none"),$("#J_cid_3").css("display","none"),a._cat_select(c)}),b.attr("data-cid")>0){for(var c=b.attr("data-cid"),d=b.children(),e=0;e<d.length;e++){var f=d.eq(e);if(f.val()==c){f.attr("selected",!0);break}}a._cat_select(b.attr("data-cid"))}},_listen_cat_2:function(){var a=admin_news,b=$("#J_cid_2");if(b.unbind("change"),b.change(function(){var b=$(this),c=b.val();a._cat_select_2(c)}),b.attr("data-cid")>0){for(var c=b.attr("data-cid"),d=b.children(),e=0;e<d.length;e++){var f=d.eq(e);if(f.val()==c){f.attr("selected",!0);break}}a._cat_select_2(b.attr("data-cid"))}},_cat_select:function(a){var b="",c=admin_news;if(a>0)for(var d,e=$("#J_cid_2").attr("data-cid"),f=0;d=c.json_cat[f++];)if(d.pid==a){var g=e==d.cid?' selected="selected"':"";b+='<option value="'+d.cid+'"'+g+">"+d.name+"</option>"}b?(b='<option value="0">'+arr_language.select+"</option>"+b,$("#J_cid_2").css("display","")):$("#J_cid_2").css("display","none"),$("#J_cid_2").html(b),c._listen_cat_2()},_cat_select_2:function(a){var b="",c=admin_news;if(a>0)for(var d,e=$("#J_cid_3").attr("data-cid"),f=0;d=c.json_cat[f++];)if(d.pid==a){var g=e==d.cid?' selected="selected"':"";b+='<option value="'+d.cid+'"'+g+">"+d.name+"</option>"}b?(b='<option value="0">'+arr_language.select+"</option>"+b,$("#J_cid_3").css("display","")):$("#J_cid_3").css("display","none"),$("#J_cid_3").html(b)},_listen_del:function(){var a=admin_news;$(".J_btn_del").click(function(){var b=$(this);confirm_cancle(a._del,arr_language.warn,arr_language.del_2),a._this=b})},_del:function(){var a=admin_news,b=admin_news._this,c=b.attr("data-nid");_ajax_jsonp("/admin.php?mod=news&mod_dir=news&extra=del&nid="+c,a._del_success)},_del_success:function(a){make_alert_html(arr_language.notice,a.info,window.location.href)},send_success:function(a){return _remove_ajax_frame("send_success"),200!=a.status?(c.bool_sending=!1,make_alert_html(arr_language.warn,a.info),!1):void make_alert_html(arr_language.notice,a.info,"/admin.php?mod=news&mod_dir=news")}},admin_news_search={_init:function(){admin_news_search._listen_cat()},_listen_cat:function(){var a=$("#J_cid");a.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&(cid_1|cid_2|cid_3)=[\d]+/g,"");window.location.href=c+"&cid_1="+b});var b=$("#J_cid_2");b.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&(cid_2|cid_3)=[\d]+/g,"");window.location.href=c+"&cid_2="+b});var c=$("#J_cid_3");c.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&cid_3=[\d]+/,"");window.location.href=c+"&cid_3="+b});var d=$("#J_language");d.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&language=[a-z_]+/,"");window.location.href=c+"&language="+b})}};