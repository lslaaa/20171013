var admin_video={_init:function(){var a=admin_video;a._listen(),a._listen_cat(),a._listen_upload(),a._listen_pic_add(),a._listen_pic_del()},_listen:function(){var a=admin_video;$("#J_send_form").submit(function(){if("upload"==$("#J_form_do").val())return!0;var b=$("#J_language");if(b.length>0&&b.val()<=0)return make_alert_html(arr_language.warn,arr_language.error_2),!1;var c=$("#J_cat");if("none"!=c.css("display")){var d=$("#J_cid");if(d.val()<=0)return make_alert_html(arr_language.warn,arr_language.pics.error_1),!1;var e=$("#J_cid_2");if("none"!=e.css("display")&&e.val()<=0)return make_alert_html(arr_language.warn,arr_language.pics.error_1),!1;var b=$("#J_cid_3");if("none"!=b.css("display")&&b.val()<=0)return make_alert_html(arr_language.warn,arr_language.pics.error_1),!1}var f=$("#J_title");if(!f.val())return make_alert_html(arr_language.warn,arr_language.pics.error_2),!1;var b=$(".J_pic_url").eq(0);if(!b.val())return make_alert_html(arr_language.warn,arr_language.pics.error_3),!1;var b=$("#J_video_code");return"none"==$(".J_video_box").css("display")||$("#J_video_url").val()||b.val()?$("#J_video_url").val()||b.val()?a.bool_sending?!1:($("#J_form_do").val("add"),a.bool_sending=!0,void _ajax_frame(get_obj("ajaxframeid"),a.send_success,"send_success")):(make_alert_html(arr_language.warn,arr_language.pics.error_5),!1):(make_alert_html(arr_language.warn,arr_language.pics.error_4),!1)})},_listen_upload:function(){var a=admin_video;$(".J_pic").unbind("change"),$(".J_pic").change(function(){var b=$(".J_pic").index(this);return a.upload_index=b,$("#J_form_do").val("upload"),a.bool_sending?!1:($(".J_pic").attr("disabled",!0),$(".J_pic").eq(b).attr("disabled",!1),a.bool_sending=!0,_ajax_frame(get_obj("ajaxframeid"),a.upload_success,"send_success"),void $("#J_send_form").submit())})},upload_success:function(a){var b=admin_video,c=b.upload_index;return $(".J_pic").attr("disabled",!1),_remove_ajax_frame("upload_success"),$("#J_form_do").val(""),200!=a.status?(b.bool_sending=!1,make_alert_html(arr_language.warn,a.info),!1):(b.bool_sending=!1,$(".J_pic_show").eq(c).html('<img src="'+a.data+'" style="width:100px">'),void $(".J_pic_url").eq(c).val(a.data))},_listen_pic_add:function(){var a=admin_video;$("#J_add_pic").click(function(){var b=a._make_pic_html(),c=$(".J_pic_box").last();$(b).insertAfter(c),a._listen_upload(),a._listen_pic_del()})},_listen_pic_del:function(){var a=admin_video,b=$(".J_del_pic");b.unbind("click"),b.click(function(){var c=b.index(this)+1;a.del_pic_index=c,confirm_cancle(a._pic_del,arr_language.warn,arr_language.del_2)})},_pic_del:function(){var a=admin_video,b=a.del_pic_index;$(".J_pic_box").eq(b).remove(),a._listen_upload(),a._listen_pic_del()},_make_pic_html:function(){var a='<dl class="J_pic_box mt12"><dt>&nbsp;</dt><dd style="position:relative;" id="J_img_add_dd"><input type="hidden" name="pic_url[]" value="" class="J_pic_url" style="float:left;"/><input name="pic" class="J_pic" type="file" style="filter:alpha(opacity=0);-moz-opacity:0;opacity:0;width:100px;height:36px;position:absolute;left:0;top:0;cursor: pointer;float:left;"><span><a href="javascript:;" class="J_del_pic del_lsit nico" title="ɾ��"><!--ɾ��--></a></span><a class="upload_pic f_l" href="javascript:;">'+arr_language.upload.upload_2+'</a><div class="up_pic_box"><span class="J_pic_show"></span><div style="overflow:hidden; height:0; clear:both;"></div></div></dd></dl>';return a},_listen_cat:function(){var a=admin_video,b=$("#J_cid");if(b.change(function(){var b=$(this),c=b.val(),d=b.find("option:selected").attr("p_type");"video"==d&&$(".J_video_box").show(),$("#J_cid_2").css("display","none"),$("#J_cid_3").css("display","none"),a._cat_select(c)}),b.attr("data-cid")>0){for(var c=b.attr("data-cid"),d=b.children(),e=0;e<d.length;e++){var f=d.eq(e);if(f.val()==c){f.attr("selected",!0);break}}a._cat_select(b.attr("data-cid"))}},_listen_cat_2:function(){var a=admin_video,b=$("#J_cid_2");if(b.unbind("change"),b.change(function(){var b=$(this),c=b.val();a._cat_select_2(c)}),b.attr("data-cid")>0){for(var c=b.attr("data-cid"),d=b.children(),e=0;e<d.length;e++){var f=d.eq(e);if(f.val()==c){f.attr("selected",!0);break}}a._cat_select_2(b.attr("data-cid"))}},_cat_select:function(a){var b="",c=admin_video;if(a>0)for(var d,e=$("#J_cid_2").attr("data-cid"),f=0;d=c.json_cat[f++];)if(d.pid==a){var g=e==d.cid?' selected="selected"':"";b+='<option value="'+d.cid+'"'+g+">"+d.name+"</option>"}b?(b='<option value="0">'+arr_language.select+"</option>"+b,$("#J_cid_2").css("display","")):$("#J_cid_2").css("display","none"),$("#J_cid_2").html(b),c._listen_cat_2()},_cat_select_2:function(a){var b="",c=admin_video;if(a>0)for(var d,e=$("#J_cid_3").attr("data-cid"),f=0;d=c.json_cat[f++];)if(d.pid==a){var g=e==d.cid?' selected="selected"':"";b+='<option value="'+d.cid+'"'+g+">"+d.name+"</option>"}b?(b='<option value="0">'+arr_language.select+"</option>"+b,$("#J_cid_3").css("display","")):$("#J_cid_3").css("display","none"),$("#J_cid_3").html(b)},_listen_del:function(){var a=admin_video;$(".J_btn_del").click(function(){var b=$(this);confirm_cancle(a._del,arr_language.warn,arr_language.del_2),a._this=b})},_del:function(){var a=admin_video,b=admin_video._this,c=b.attr("data-id");_ajax_jsonp("/admin.php?mod=video&mod_dir=video&extra=del&nid="+c,a._del_success)},_del_success:function(a){make_alert_html(arr_language.notice,a.info,window.location.href)},send_success:function(a){var b=admin_video;return _remove_ajax_frame("send_success"),200!=a.status?(b.bool_sending=!1,make_alert_html(arr_language.warn,a.info),!1):void make_alert_html(arr_language.notice,a.info,"/admin.php?mod=video&mod_dir=video")}},admin_video_search={_init:function(){admin_video_search._listen_cat()},_listen_cat:function(){var a=$("#J_cid");a.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&(cid_1|cid_2|cid_3)=[\d]+/g,"");window.location.href=c+"&cid_1="+b});var b=$("#J_cid_2");b.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&(cid_2|cid_3)=[\d]+/g,"");window.location.href=c+"&cid_2="+b});var c=$("#J_cid_3");c.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&cid_3=[\d]+/,"");window.location.href=c+"&cid_3="+b});var d=$("#J_language");d.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&language=[a-z_]+/,"");window.location.href=c+"&language="+b})}};