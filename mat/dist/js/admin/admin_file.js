var admin_file={_init:function(){var a=admin_file;a._listen(),a._listen_cat()},_listen:function(){var a=admin_file;$("#J_file").change(function(){return $("#J_form_do").val("upload"),a.bool_sending?!1:(a.bool_sending=!0,_ajax_frame(get_obj("ajaxframeid"),a.upload_success,"send_success"),void $("#J_send_form").submit())}),$("#J_send_form").submit(function(){if("upload"==$("#J_form_do").val())return!0;var b=$("#J_cat");if("none"!=b.css("display")){var c=$("#J_cid");if(c.val()<=0)return make_alert_html(arr_language.warn,arr_language.file.error_1),!1;var d=$("#J_cid_2");if("none"!=d.css("display")&&d.val()<=0)return make_alert_html(arr_language.warn,arr_language.file.error_1),!1}var e=$("#J_title");if(!e.val())return make_alert_html(arr_language.warn,arr_language.file.error_2),!1;var f=$("#J_file_url");return f.val()?a.bool_sending?!1:($("#J_form_do").val("add"),a.bool_sending=!0,void _ajax_frame(get_obj("ajaxframeid"),a.send_success,"send_success")):(make_alert_html(arr_language.warn,arr_language.file.error_3),!1)})},upload_success:function(a){var b=admin_file;return _remove_ajax_frame("upload_success"),$("#J_form_do").val(""),200!=a.status?(b.bool_sending=!1,make_alert_html(arr_language.warn,a.info),!1):(b.bool_sending=!1,$("#J_file_show").html('<a href="'+a.data+'"  target="_blank">'+arr_language.show_file+"</a>"),void $("#J_file_url").val(a.data))},_listen_cat:function(){var a=admin_file,b=$("#J_cid");if(b.change(function(){var b=$(this),c=b.val();a._cat_select(c)}),b.attr("data-cid")>0){for(var c=b.attr("data-cid"),d=b.children(),e=0;e<d.length;e++){var f=d.eq(e);if(f.val()==c){f.attr("selected",!0);break}}a._cat_select(b.attr("data-cid"))}},_cat_select:function(a){var b="",c=admin_file;if(a>0)for(var d,e=$("#J_cid_2").attr("data-cid"),f=0;d=c.json_cat[f++];)if(d.pid==a){var g=e==d.cid?' selected="selected"':"";b+='<option value="'+d.cid+'"'+g+">"+d.name+"</option>"}b?(b='<option value="0">'+arr_language.select+"</option>"+b,$("#J_cid_2").css("display","")):$("#J_cid_2").css("display","none"),$("#J_cid_2").html(b)},_listen_del:function(){var a=admin_file;$(".J_btn_del").click(function(){var b=$(this);confirm_cancle(a._del,arr_language.warn,arr_language.del_2),a._this=b})},_del:function(){var a=admin_file,b=admin_file._this,c=b.attr("data-id");_ajax_jsonp("/admin.php?mod=file&mod_dir=file&extra=del&id="+c,a._del_success)},_del_success:function(a){make_alert_html(arr_language.notice,a.info,window.location.href)},send_success:function(a){return _remove_ajax_frame("send_success"),200!=a.status?(c.bool_sending=!1,make_alert_html(arr_language.warn,a.info),!1):void make_alert_html(arr_language.notice,a.info,"/admin.php?mod=file&mod_dir=file")}};