var admin_ads={_init:function(){admin_ads._listen_add()},_listen_add:function(){if($("#J_ads_cid").change(function(){for(var a=$(this),b=a.children(),c=0;c<b.length;c++){var d=b.eq(c);if(d.val()==a.val()){var e=d;break}}admin_ads._format_options(e)}),$("#J_pic").change(function(){return $("#J_form_do").val("upload"),admin_ads.bool_sending?!1:(admin_ads.bool_sending=!0,_ajax_frame(get_obj("ajaxframeid"),admin_ads.upload_success,"send_success"),void $("#J_send_form").submit())}),$("#J_send_form").submit(function(){return"upload"==$("#J_form_do").val()?!0:admin_ads._verify()?admin_ads.bool_sending?!1:($("#J_form_do").val("add"),admin_ads.bool_sending=!0,void _ajax_frame(get_obj("ajaxframeid"),admin_ads.send_success,"send_success")):!1}),$("#J_ads_cid").val()>0){for(var a=$("#J_ads_cid option"),b=0;b<a.length;b++){var c=a.eq(b);if(c.val()==$("#J_ads_cid").val()){var d=c;break}}admin_ads._format_options(d)}},_verify:function(){var a=$("#J_language");if(a.length>0&&a.val()<=0)return make_alert_html(arr_language.warn,arr_language.error_2),!1;var b=$("#J_title");if(!b.val())return make_alert_html(arr_language.warn,arr_language.ads.error_1),!1;if("none"!=$("#J_url_box").css("display")){var c=$("#J_url");if(!c.val())return make_alert_html(arr_language.warn,arr_language.ads.error_2),!1}if("none"!=$("#J_des_box").css("display")){var d=$("#J_des");if(!d.val())return make_alert_html(arr_language.warn,arr_language.ads.error_3),!1}if("none"!=$("#J_des_2_box").css("display")){var d=$("#J_des_2");if(!d.val())return make_alert_html(arr_language.warn,arr_language.ads.error_5),!1}if("none"!=$("#J_des_3_box").css("display")){var d=$("#J_des_3");if(!d.val())return make_alert_html(arr_language.warn,arr_language.ads.error_6),!1}if("none"!=$("#J_pic_box").css("display")){var e=$("#J_pic_url");if(!e.val())return make_alert_html(arr_language.warn,arr_language.ads.error_4),!1}return!0},_format_options:function(a){if(1==a.attr("data-url")?$("#J_url_box").css("display",""):$("#J_url_box").css("display","none"),1==a.attr("data-des")?$("#J_des_box").css("display",""):$("#J_des_box").css("display","none"),1==a.attr("data-des_2")?$("#J_des_2_box").css("display",""):$("#J_des_2_box").css("display","none"),1==a.attr("data-des_3")?$("#J_des_3_box").css("display",""):$("#J_des_3_box").css("display","none"),1==a.attr("data-pic")){$("#J_pic_box").css("display","");var b=a.attr("data-max_width"),c=a.attr("data-max_height");if(b>0&&0==c)var d=arr_language.upload.max_width.replace("xxx",b);else if(0==b&&c>0)var d=arr_language.upload.max_height.replace("xxx",c);else if(b>0&&b>0)var d=b+"px*"+c+"px";$("#J_best_size").html(d)}else $("#J_pic_box").css("display","none")},upload_success:function(a){return _remove_ajax_frame("upload_success"),$("#J_form_do").val(""),200!=a.status?(admin_ads.bool_sending=!1,make_alert_html(arr_language.warn,a.info),!1):(admin_ads.bool_sending=!1,$("#J_pic_show").html('<img src="'+a.data+'" style="width:100px">'),void $("#J_pic_url").val(a.data))},_listen_del:function(){$(".J_btn_del").click(function(){var a=$(this);confirm_cancle(admin_ads._del,arr_language.warn,arr_language.del_2),admin_ads._this=a})},_del:function(){var a=admin_ads._this,b=a.attr("data-aid");_ajax_jsonp("/admin.php?mod=ads&extra=del&mod_dir=ads&aid="+b,admin_ads._del_success)},_del_success:function(a){make_alert_html(arr_language.notice,a.info,window.location.href)},send_success:function(a){return _remove_ajax_frame("send_success"),200!=a.status?($("#J_pic").attr("disabled",!1),admin_ads.bool_sending=!1,make_alert_html(arr_language.warn,a.info),!1):void make_alert_html(arr_language.notice,a.info,"/admin.php?mod=ads&mod_dir=ads")}},admin_ads_search={_init:function(){admin_ads_search._listen_cat()},_listen_cat:function(){var a=$("#J_ads_cid");a.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&ads_cid=[\d]+/,"");window.location.href=c+"&ads_cid="+b});var b=$("#J_language");b.change(function(){var a=$(this),b=a.val(),c=window.location.href.replace(/\&language=[a-z_]+/,"");window.location.href=c+"&language="+b})}};