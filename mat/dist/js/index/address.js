var address={_init:function(){var a=address;a._listen_add(),a._listen_mod(),a._listen_save(),a._listen_choose()},_listen_choose:function(){$(".J_address_list").unbind("click"),$(".J_address_list").click(function(){var a=$(this);a.find("span").addClass("on"),a.siblings().find("span").removeClass("on"),$("#J_order_address_id").val(a.attr("id").replace("J_address_",""))})},_listen_add:function(){$("#J_btn_add_address").click(function(){$("#J_add_address").css("display",""),$("#J_address_id").val(0)}),$("#J_save_address").click(function(){}),$("#J_cancel_address").click(function(){$("#J_add_address").css("display","none")})},_listen_mod:function(){var a=address;$(".J_btn_edit_address").unbind("click"),$(".J_btn_edit_address").click(function(){var b=$(this),c=new Object;c.address_id=b.attr("data-address_id"),_ajax_jsonp("/mall/get_address",a._get_address_success,c)}),$("#J_btn_order_step_1_edit").click(function(){$("#J_order_step_1").css("display",""),$("#J_order_step_1_title").addClass("pc_title_on")})},_listen_save:function(){var a=address;$("#J_save_address").click(function(){if(!a._verify_address())return!1;if(a.bool_sending)return!1;var b=$("#J_pc_login_info");return b.length<=0?($("#J_order_step_1").css("display","none"),$("#J_order_step_1_title").removeClass("pc_title_on"),!1):(a.bool_sending=!0,_ajax_frame(get_obj("ajaxframeid"),a.send_success,"send_success"),void $("#J_address_form").submit())})},_verify_address:function(){var a=$("#J_contact");if(!a.val())return make_alert_html(arr_language.warn,arr_language.address.error_1),!1;var a=$("#J_phone");if(!a.val())return make_alert_html(arr_language.warn,arr_language.address.error_2),!1;var a=$("#J_area");if(a.val()<=0)return make_alert_html(arr_language.warn,arr_language.address.error_3),!1;var a=$("#J_address");if(!a.val())return make_alert_html(arr_language.warn,arr_language.address.error_4),!1;var a=$("#J_zip_code");return a.val()?!0:(make_alert_html(arr_language.warn,arr_language.address.error_5),!1)},_get_address_success:function(a){var b=a.data;$("#J_add_address").css("display",""),$("#J_contact").val(b.contact),$("#J_phone").val(b.phone),$("#J_address").val(b.address),$("#J_zip_code").val(b.zip_code),$("#J_address_id").val(b.address_id),$("#J_province").attr("data-province",b.province),$("#J_city").attr("data-city",b.city),$("#J_area").attr("data-area",b.area),district._init("J_province","J_city","J_area")},send_success:function(a){var b=address;if(_remove_ajax_frame("send_success"),b.bool_sending=!1,200!=a.status)return make_alert_html(arr_language.warn,a.info),!1;var c=a.data;$("#J_add_address").css("display","none"),$("#J_contact").val(""),$("#J_phone").val(""),$("#J_address").val(""),$("#J_zip_code").val(""),$("#J_address_id").val("");var d="J_address_"+c.address_id;if($("#"+d).length>0){var e=$("#"+d);return e.find(".J_show_address_nickname").html(c.address_nickname),e.find(".J_show_first_name").html(c.first_name),e.find(".J_show_last_name").html(c.last_name),e.find(".J_show_address").html(c.address),!1}var f='<div  id="J_address_'+c.address_id+'" class="J_address_list sure_address"><div class="edit_address"><span><i>&nbsp;</i><em>'+arr_language.address.des_1+'</em></span><a class="J_btn_edit_address" data-address_id="'+c.address_id+'" href="#add_address">'+arr_language.edit+'</a></div><p class="name">'+arr_language.address.contact+'：<i class="J_show_first_name">'+c.contact+"</i></p><p>"+arr_language.address.phone+'：<i class="J_show_phone">'+c.phone+"</i></p><p>"+arr_language.address.address+'：<i class="J_show_address">'+c.address+"</i>&nbsp;&nbsp;&nbsp;"+arr_language.address.zip_code+'<i class="J_show_address">'+c.zip_code+"</i></p></div>";$(".J_address_list").length<=0?$("#J_address_list").append(f):$(f).insertAfter($(".J_address_list").last()),b._listen_mod(),b._listen_choose()}};